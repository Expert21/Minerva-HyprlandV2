# =============================================================================
# Yazi Main Configuration - Obsidian · Sapphire · Tyrian Theme
# =============================================================================
#
# File manager behavior settings
# Documentation: https://yazi-rs.github.io/docs/configuration/yazi
# =============================================================================

[manager]
# Layout: ratios for parent:current:preview panes
layout = [1, 3, 4]

# Sorting
sort_by = "natural"
sort_sensitive = false
sort_reverse = false
sort_dir_first = true
sort_translit = false

# Display
linemode = "size"
show_hidden = false
show_symlink = true

# Scrolloff (lines of context when navigating)
scrolloff = 5

[preview]
tab_size = 2
max_width = 600
max_height = 900
cache_dir = ""

# Image preview (if using a capable terminal)
image_filter = "lanczos3"
image_quality = 75
sixel_fraction = 15
ueberzug_scale = 1
ueberzug_offset = [0, 0, 0, 0]

[opener]
edit = [
    { run = 'micro "$@"', block = true, desc = "Edit with Micro", for = "unix" },
    { run = 'wezterm start -- micro "$@"', orphan = true, desc = "Edit in new terminal", for = "unix" },
]
open = [
    { run = 'xdg-open "$@"', desc = "Open", for = "linux" },
]
reveal = [
    { run = 'thunar "$(dirname "$1")"', desc = "Reveal in Thunar", for = "linux" },
]

[open]
rules = [
    # Text files
    { mime = "text/*", use = ["edit", "open"] },
    { mime = "application/json", use = ["edit", "open"] },
    { mime = "application/x-yaml", use = ["edit", "open"] },
    
    # Images
    { mime = "image/*", use = ["open"] },
    
    # Videos
    { mime = "video/*", use = ["open"] },
    
    # Audio
    { mime = "audio/*", use = ["open"] },
    
    # Archives
    { mime = "application/zip", use = ["open"] },
    { mime = "application/*tar*", use = ["open"] },
    { mime = "application/*zstd", use = ["open"] },
    
    # Fallback
    { name = "*", use = ["open", "edit"] },
]

[tasks]
micro_workers = 10
macro_workers = 25
bizarre_retry = 5

[plugin]
prepend_previewers = []
append_previewers = []
prepend_fetchers = []
append_fetchers = []

[input]
cursor_blink = true

[confirm]
# Confirmation for trash (not permanent delete)
trash = true
# Confirmation for permanent delete
delete = true
# Confirmation for overwrite
overwrite = true
